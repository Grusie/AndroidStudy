# 17 - 1 데이터베이스에 보관하기

## SQLite

> 안드로이드 폰에서 이용하는 데이터베이스 관리 시스템
>
> 데이터를 앱의 저장소에 파일로 저장 -> 외부 앱에서 접근할 수 없다

Query(질의문) : 데이터베이스에 정보를 요청하는 것

### Query 작성

> SQLite를 사용하기 위해 SqLiteDataBase라는 API 이용

> * SQLiteDatabase 객체 생성 -> execSQL, rawQuery 실행 가능
>
> execSQL : create, alter ,drop, insert, update, delete 문을 실행하는 함수
>
> rawQuery : select 문 실행 > return값 Cursor 객체

> * 조회 방법 : Cursor 객체로 행 선택 > 행의 열 데이터 가져오기
>
> 행 선택 : moveTo~ 함수 이용 > return값 Boolean ( true: 선택한 행이 있을 경우, false: 선택한 행이 없을 경우)
>
> public abstract boolean moveToFirst(): 첫 번째 행 선택
>
> public abstract boolean moveToLast(): 마지막 행 선택
>
> public abstract boolean moveToNext(): 다음 행 선택
>
> public abstract boolean moveToPosition(int position): 지정한 위치 행 선택
>
> public abstract boolean moteToPrevious(): 이전 행 선택
>
> 열 데이터 가져오기 > 타입에 따라 사용
>
> public abstract String getString(int columnIndex)
>
> public abstract Int getInt(int columnIndex)

~~~
val db = openOrCreateDatabase("testdb", Context.MODE_PRIVATE, null) // DB 파일 이름: textdb

//테이블 생성 create문
db.execSQL("create table USER_TB (" +
    "id integer primary key autoincrement," +
    "name not null," +
    "phone)")

//데이터 삽입 insert문
db.execSQL("insert into USER_TB (name, phone) values (?,?)", arrayOf("dong","010111"))

//데이터 조회 select문
val cursor = db.rawQuery("select * from USER_TB", null)

while (cursor.moveToNext()){while(cursor.moveToNext()){
    val name = cursor.getString(0)
    val phone = cursor.getString(1)
}
~~~

-> insert(), update(), delete(), query() 함수도 사용 가능



